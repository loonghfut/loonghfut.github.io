---
layout: default
---

<a href="{{ '/' | relative_url }}" class="back-link">← 返回首页</a>

<article class="content">
  {% if page.featured_image %}
  <img src="{{ page.featured_image }}" alt="{{ page.title }}" class="featured-image">
  {% endif %}
  
  <div class="article-header">
    <p class="article-eyebrow">文稿</p>
    <h1>{{ page.title }}</h1>
    
    <div class="article-meta">
      {% if page.date %}
      <span class="article-meta-item">
        首刊 · {{ page.date | date: "%Y年%m月%d日" }}
      </span>
      {% endif %}
      
      {% if page.lastmod %}
      <span class="article-meta-item">
        修订 · {{ page.lastmod | date: "%Y年%m月%d日" }}
      </span>
      {% endif %}
    </div>
  </div>
  
  <div class="post-content">
    <aside class="outline-panel" aria-label="文章大纲">
      <div class="outline-header">
        <strong>大纲</strong>
        <button class="outline-toggle" type="button" aria-expanded="true" aria-controls="outline-content">收起</button>
      </div>
      <nav id="outline-content" class="outline-content" aria-label="段落导航"></nav>
    </aside>

    <div class="article-body">
      {{ content }}
    </div>
  </div>
</article>

<script>
  // Detect and move header image (Notion-style)
  (function() {
    const articleBody = document.querySelector('.article-body');
    const articleHeader = document.querySelector('.article-header');
    
    if (!articleBody || !articleHeader || !articleHeader.parentElement) return;
    
    // Find the first image in article body
    const firstImg = articleBody.querySelector('img');
    
    if (firstImg) {
      // Check if the image is at the very beginning (first or second element)
      const firstElements = Array.from(articleBody.children).slice(0, 2);
      const imgParent = firstImg.parentElement;
      
      // If image is in the first two elements, treat it as a header image
      if (firstElements.includes(firstImg) || firstElements.includes(imgParent)) {
        // Create header image container
        const headerImageContainer = document.createElement('div');
        headerImageContainer.className = 'notion-header-image';
        
        // Clone the image
        const headerImg = firstImg.cloneNode(true);
        headerImageContainer.appendChild(headerImg);
        
        // Insert before article header
        articleHeader.parentElement.insertBefore(headerImageContainer, articleHeader);
        
        // Remove original image from article body
        if (imgParent.tagName === 'P' && imgParent.children.length === 1) {
          imgParent.remove();
        } else {
          firstImg.remove();
        }
      }
    }
  })();

  // Outline logic is implemented in /assets/js/outline.js
</script>
<!-- Outline is generated client-side -->
